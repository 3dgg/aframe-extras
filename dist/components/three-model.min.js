!function i(e,t,n){function o(a,s){if(!t[a]){if(!e[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(r)return r(a,!0);var m=new Error("Cannot find module '"+a+"'");throw m.code="MODULE_NOT_FOUND",m}var h=t[a]={exports:{}};e[a][0].call(h.exports,function(i){var t=e[a][1][i];return o(t?t:i)},h,h.exports,i,e,t,n)}return t[a].exports}for(var r="function"==typeof require&&require,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(i,e,t){AFRAME.registerComponent("three-model",i("./src/loaders/three-model"))},{"./src/loaders/three-model":2}],2:[function(i,e,t){var n="__auto__";e.exports={schema:{src:{type:"src"},loader:{"default":"object",oneOf:["object","json"]},enableAnimation:{"default":!0},animation:{"default":n},animationDuration:{"default":0},crossorigin:{"default":""}},init:function(){this.model=null,this.mixer=null},update:function(i){i=i||{};var e,t=this.data;if(!t.src)return void this.remove();if(Object.keys(i).length){var n=this.model&&this.model.activeAction;if(t.animation!==i.animation)return n&&n.stop(),void this.playAnimation();n&&t.enableAnimation!==n.isRunning()&&(t.enableAnimation?this.playAnimation():n.stop()),n&&t.animationDuration&&n.setDuration(t.animationDuration)}else if(this.remove(),"object"===t.loader)e=new THREE.ObjectLoader,t.crossorigin&&e.setCrossOrigin(t.crossorigin),e.load(t.src,function(i){i.traverse(function(e){e instanceof THREE.SkinnedMesh&&(i=e)}),i.material&&(i.material.skinning=!!(i.geometry&&i.geometry.bones||[]).length),this.load(i)}.bind(this));else{if("json"!==t.loader)throw new Error('[three-model] Invalid mode "%s".',t.mode);e=new THREE.JSONLoader,t.crossorigin&&(e.crossOrigin=t.crossorigin),e.load(t.src,function(i,e){e.forEach(function(e){e.vertexColors=(i.faces[0]||{}).color?THREE.FaceColors:THREE.NoColors,e.skinning=!!(i.bones||[]).length,e.morphTargets=!!(i.morphTargets||[]).length,e.morphNormals=!!(i.morphNormals||[]).length});var t=(i.bones||[]).length?new THREE.SkinnedMesh(i,new THREE.MultiMaterial(e)):new THREE.Mesh(i,new THREE.MultiMaterial(e));this.load(t)}.bind(this))}},load:function(i){this.model=i,this.mixer=new THREE.AnimationMixer(this.model),this.el.setObject3D("mesh",i),this.el.emit("model-loaded",{format:"three",model:i}),this.data.enableAnimation&&this.playAnimation()},playAnimation:function(){var i,e=this.data,t=this.model.animations||this.model.geometry.animations||[];if(e.enableAnimation&&e.animation&&t.length){if(i=e.animation===n?t[0]:THREE.AnimationClip.findByName(t,e.animation),!i)return void console.error('[three-model] Animation "%s" not found.',e.animation);this.model.activeAction=this.mixer.clipAction(i,this.model),e.animationDuration&&this.model.activeAction.setDuration(e.animationDuration),this.model.activeAction.play()}},remove:function(){this.mixer&&this.mixer.stopAllAction(),this.model&&this.el.removeObject3D("mesh")},tick:function(i,e){this.mixer&&!isNaN(e)&&this.mixer.update(e/1e3)}}},{}]},{},[1]);